{% extends "base.html" %}
{% load static %}
{% block css_file_name %}{% static 'css/style.css' %}{% endblock %}

{% block content %}

<section class="events-landing">
    <div class="events-wrap">
        <!-- Category -->
        {% if latest_event %}
        <div class="events-card">
            <div class="image">
                <img src="{{ latest_event.image.url }}" alt="{{ latest_event.name }}" id="event-image">
            </div>
            <div class="details" >
                <p class="event-date">{{ latest_event.date }}</p>
                <h3>{{ latest_event.title }}</h3>
                <p class="desc">{{ latest_event.description|truncatewords:20|striptags }}</p>
                <div class="btns">
                    <a class="primary-btn" href="{% url 'buy-tickets' event_name=latest_event %}">Buy Tickets</a>
                    <a class="secondary-btn" href="{% url 'event-details' event_id=latest_event.id %}">Information</a>
                </div>
            </div>
        </div>
        {% else %}
        <p>No upcoming events</p>
        {% endif %}
    </div>
</section>
<section>
    <div class="upcoming-events">
        <h2>Upcoming Events</h2>
        <div class="event-card-wrap">
            {% for event in upcoming_events %}
            <a href="{% url 'event-details' event_id=event.id %}">
                <div class="event-card">
                    <img src="{{ event.image.url }}" alt="{{ event }}">
                    <h3>{{ event }}</h3>
                </div>
            </a>
            {% endfor %}
        </div>

    </div>
</section>

<!-- section with one title some text about the full schedule and event categories and  two buttons to schedule and event categories-->
<section class="schedule">
    <div class="schedule-wrap">
        <h2>Full Schedule</h2>
        <p>View the full schedule of events to plan your attendance and participation. Explore the diverse range of
            event categories to find the events that interest you.View the full schedule of events to plan your
            attendance and participation. Explore the diverse range of
            event categories to find the events that interest you.</p>
        <div class="schedule-btn-wrap">
            <a href="{% url 'events-categories' %}" class="btn">Explore More Events</a>
            <a href="{% url 'schedules' %}" class="btn">See Full Schedule</a>
        </div>
    </div>
</section>
<section class="main-section">
    <div class="main-container">
        <div class="main-content">
            <h2>About Us</h2>
            <p>Sajilo Events is an advanced platform designed to facilitate seamless planning, organization, and
                execution of events. Built with the needs of event organizers and staff in mind, Sajilo Events
                offers a range of powerful features to simplify event management tasks.</p>
            <h3>Key Features:</h3>
            <ul>
                <li>User Authentication and Authorization: Implement secure user authentication and authorization
                    mechanisms to ensure that only authorized personnel can access sensitive data and
                    functionalities within the system.</li>
                <li>Event Creation and Management: Enable event organizers to create and manage events effortlessly.
                    This includes functionalities for setting event details such as date, time, location, and
                    description, as well as managing event-related tasks and resources.</li>
                <li>Staff and Volunteer Management: Provide tools for assigning tasks, scheduling shifts, and
                    communicating with staff and volunteers. Streamline the coordination process to ensure that
                    everyone involved in the event is well-informed and organized.</li>
                <li>Registration and Ticketing: Implement registration and ticketing functionalities to allow
                    attendees to register for events and purchase tickets online. Enable event organizers to track
                    registrations, manage attendee data, and generate event passes.</li>
            </ul>
            <h3>Why Choose Sajilo Events?</h3>
            <ul>
                <li>Efficiency: Sajilo Events streamlines event management tasks, saving time and effort for
                    organizers and staff.</li>
                <li>Accessibility: The platform is designed to be user-friendly and accessible, making it easy for
                    users of all skill levels to navigate and utilize its features.</li>
                <li>Scalability: Whether organizing a small-scale workshop or a large-scale conference, Sajilo
                    Events scales to accommodate events of all sizes and complexities.</li>
            </ul>
        </div>
    </div>
</section>

<section class="contact">
    <div class="contact-wrap">
        <h2>Contact Us</h2>
        <p>If you have any questions or inquiries, feel free to reach out to us. Our team is here to assist you.</p>
        <div class="contact-info">
            <div class="contact-item">
                <i class="fas fa-envelope"></i>
                <p>Email: <a href="mailto:sajiloevents@gmail.com">sajiloevents@gmail.com</a></p>
            </div>
            <div class="contact-item">
                <i class="fas fa-phone"></i>
                <p>Phone: <a href="tel:+977-9861813697">+977-9861813697</a></p>
            </div>
            <div class="contact-item">
                <i class="fas fa-map-marker-alt"></i>
                <p>Address: Kathmandu, Nepal</p>
            </div>
        </div>
    </div>
</section>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>

<script>
    // Get all banner images
    const bannerImages = [
        {% for banner_image in banner_images %}
            "{{ banner_image }}",
        {% endfor %}
    ];

    // Initialize index to track current image
    let currentIndex = 0;

    // Function to rotate images
    function rotateImages() {
        // Update image source
        document.getElementById('banner-image').src = bannerImages[currentIndex];
        
        // Increment index
        currentIndex = (currentIndex + 1) % bannerImages.length;
    }

    // Rotate images every 5 seconds (adjust interval as needed)
    setInterval(rotateImages, 5000); // 5000 milliseconds = 5 seconds

    window.addEventListener('load', function() {
        adjustImageHeight();
    });

    window.addEventListener('resize', function() {
        adjustImageHeight();
    });

    function adjustImageHeight() {
        var image = document.getElementById('event-image');
        var contentHeight = document.querySelector('.details').offsetHeight;
        image.style.height = contentHeight + 'px';
    }

    gsap.from(".landing-content h1 span:first-child", {
        opacity: 0,
        y: 50,
        stagger: 0.1,
        duration: 1,
        ease: "power4.out"
    });
    const phrases = ["Your Ultimate Experience", "The Ultimate Adventure", "An Unforgettable Journey"];

    let index = 0;

    function changeSecondHalf() {
        const secondHalf = document.querySelector(".landing-content .second-half");
        gsap.to(secondHalf, { opacity: 0, duration: 0.5, onComplete: () => {
            secondHalf.textContent = phrases[index];
            gsap.to(secondHalf, { opacity: 1, duration: 0.5 });
            index = (index + 1) % phrases.length;
        }});
    }

    setInterval(changeSecondHalf, 3000); // Change every 5 seconds

</script>

{% endblock content %}